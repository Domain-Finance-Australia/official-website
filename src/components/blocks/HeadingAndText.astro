---
import type { HeadingAndTextAlignments, THeadingAndText } from "../../types";
import Heading from "../Heading.astro";
import BlockLayout from "./BlockLayout.astro";
import Prose from "../Prose.astro";
import { marked } from "marked";

interface Props {
  block: THeadingAndText | undefined;
}

const { block } = Astro.props;

if (!block) return null;

const styles: Record<HeadingAndTextAlignments, any> = {
  LEFT: { heading: "text-left", text: "prose-p:text-left" },
  CENTER: { heading: "text-center", text: "prose-p:text-center" },
  RIGHT: { heading: "text-right", text: "prose-p:text-right" },
};

const style = styles[block.alignment];
const markdown = marked.parse(block.text);
---

<BlockLayout>
  <div class="flex flex-col gap-10 max-w-3xl">
    <Heading level={3} class={style.heading}>{block.heading}</Heading>
    <Prose class={style.text}>
      <div set:html={markdown} />
    </Prose>
  </div>
</BlockLayout>
