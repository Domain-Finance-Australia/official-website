---
import { BASE_API_URL } from "../utils/url";

// Only accepts SVG's
interface Props {
  src: string;
  class?: string;
  width: number;
  height: number;
}

const { src, class: className, width, height } = Astro.props;

// Fetch the SVG content from your CMS
let svgContent = "";
try {
  let iconSrc = src;

  if (iconSrc.startsWith("/")) {
    iconSrc = BASE_API_URL + iconSrc;
  }

  const response = await fetch(iconSrc);
  svgContent = await response.text();
} catch (error) {
  console.error("Failed to fetch SVG:", error);
}
---

{
  svgContent && (
    <div
      class:list={["inline-block", className]}
      style={`width: ${width}px; height: ${height}}`}
      set:html={svgContent}
    />
  )
}
<style>
  div :global(svg) {
    width: 100%;
    height: 100%;
  }
</style>
